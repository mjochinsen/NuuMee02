{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Agent Memory Entry",
  "description": "Schema for persistent agent memory entries",
  "type": "object",
  "required": ["id", "timestamp", "category", "content", "hash"],
  "properties": {
    "id": {
      "type": "string",
      "description": "Unique identifier (UUID v4)",
      "pattern": "^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$"
    },
    "timestamp": {
      "type": "string",
      "description": "ISO-8601 timestamp",
      "format": "date-time"
    },
    "category": {
      "type": "string",
      "enum": ["insight", "pattern", "decision", "bug", "preference"],
      "description": "Type of memory entry"
    },
    "context": {
      "type": "string",
      "description": "Project context (phase, feature, module)",
      "maxLength": 50
    },
    "content": {
      "type": "string",
      "description": "The actual memory content",
      "maxLength": 500
    },
    "source": {
      "type": "string",
      "description": "Session ID or agent name that created this",
      "maxLength": 100
    },
    "tags": {
      "type": "array",
      "items": {
        "type": "string",
        "maxLength": 30
      },
      "maxItems": 10,
      "description": "Searchable tags"
    },
    "hash": {
      "type": "string",
      "description": "SHA-256 hash of content for deduplication",
      "pattern": "^[a-f0-9]{64}$"
    },
    "score": {
      "type": "number",
      "minimum": 0,
      "maximum": 10,
      "description": "Usefulness score (set by curator)"
    },
    "archived": {
      "type": "boolean",
      "default": false,
      "description": "Whether this entry is archived"
    }
  },
  "additionalProperties": false
}
